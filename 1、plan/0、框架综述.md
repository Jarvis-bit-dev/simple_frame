### 一、flash划分

- bootloader
  - 跳转至新版本的app

- app1
  - ymodem协议
  - 固件更新
  - 配置文件更新
  - lua脚本

- app2
- configure
  - 配置系统参数

- lua
  - 根据脚本执行相应指令


### 二、版本管理

- 硬件版本
- bootloader版本
- 固件版本
- 协议版本
- 资源版本
- 上位机版本
- 配置文件版本
- 产品型号
- 编译时间

### 三、功能模块规划

#### 	1、shell模块

- set、get动态查看变量值
- 函数运行时间测量功能
- 函数调用功能

#### 	2、日志模块

- 异步输出
- 等级划分

#### 	3、错误模块

- 滤波功能
- 多个错误级别
- 动态绑定err_check与action

#### 	4、lua模块

#### 5、配置文件模块

- 以字典形式对系统进行配置
- 将字典内容绑定到同名的变量上

### 四、任务模块规划

#### 1、实现一个挂载函数，将任务挂载至指定队列

- 队列号
- 周期（loop队列）
- 运行次数
- 用户参数

#### 	2、loop任务队列

- 实时性要求不强、比较耗时的任务
- 协议解析
- IIC通信

#### 	3、定时器任务队列，可以设置多个周期的队列

- 实时性要求比较高的任务
- 算法控制，如pid

### 五、硬件接口模块规划

#### 	1、USART模块

- 环形缓冲队列接收机制
- 动态解析函数注册机制

#### 	2、IIC模块

- 软件I2C

#### 	3、SPI模块

- 软件SPI

#### 	4、RTC模块 

### 六 、算法模块规划

#### 	1、pid算法

#### 2、滤波算法

### 七 、协议模块规划

#### 	1、ymodem协议

#### 2、modbus协议

#### 3、自定义上位机协议

### 八、上位机

#### 	1、配置文件更新

#### 	2、固件更新

#### 	3、数据渲染、存储、导出

#### 	4、RTC校准

#### 5、配置文件生成导出



